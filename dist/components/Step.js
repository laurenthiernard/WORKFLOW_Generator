import n,{useState as k,useContext as P}from"../../web_modules/react.js";import N from"./StepItem.js";import U from"../WorkflowContext.js";import e from"./Step.module.css.proxy.js";import{FontAwesomeIcon as _}from"../../web_modules/@fortawesome/react-fontawesome.js";import{faBars as I,faWindowClose as D}from"../../web_modules/@fortawesome/free-solid-svg-icons.js";export default function b(s){const{type:o}=s,{Title:i,StepDurationDays:p,WorkFlowTemplateStepItems:c,StepNumber:l,IsDraft:f}=s.stepJson||{},m=c!==void 0?c.sort((t,a)=>t.ItemOrder-a.ItemOrder):[],[E,d]=k(!1),r=P(U);function S(t){d(!0)}function u(t){d(!1)}function v(t){t.preventDefault()}function w(t){o==="inner"?r?.addStepItem(l):r?.addStep(l),d(!1)}function R(){s.isLocked||r?.removeStep(l)}function g(t){let a=t.pageX<document.body.clientWidth-310?t.pageX+20:t.pageX-315;s.isLocked||r?.editStep(l,{y:t.pageY-80,x:a})}return n.createElement("div",{className:`${e.StepContainer} ${o==="start"?e.StepStart:""} ${o==="end"?e.StepEnd:""}`},n.createElement("div",{className:e.StepHeader},f&&n.createElement("div",{className:e.labelDraft},"DRAFT"),o==="inner"&&n.createElement("div",{className:e.btnEditStep,onClick:g},n.createElement(_,{icon:I})),o==="start"?"Duration":o==="end"?"Total":n.createElement("div",{className:e.title},i),o==="inner"&&n.createElement("div",{className:e.duration},p," days"),o==="inner"&&n.createElement(_,{icon:D,className:e.btnRemoveStep,onClick:R})),n.createElement("div",{className:`${o==="end"?e.StepContentEnd:e.StepContent} ${E?e.hovered:""}`,onDragEnter:S,onDragLeave:u,onDragOver:v,onDrop:w},m.map((t,a)=>n.createElement("div",{key:t.ItemOrder,className:`${e.StepItem} ${m.length<2?e.sin:a===0?e.top:a===m.length-1?e.bot:e.mid}`},n.createElement(N,{stepItemJson:t,stepNumber:l,isLocked:s.isLocked}))),o==="start"&&r?.currentWorkflow?.WorkFlowTemplateSteps.length>0&&n.createElement("div",{className:e.startBG}),o==="end"&&r?.currentWorkflow?.WorkFlowTemplateSteps.length>0&&n.createElement("div",{className:e.endBG})))}
