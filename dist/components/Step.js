import o,{useState as R,useContext as I}from"../../web_modules/react.js";import P from"./StepItem.js";import H from"../WorkflowContext.js";import t from"./Step.module.css.proxy.js";import{FontAwesomeIcon as p}from"../../web_modules/@fortawesome/react-fontawesome.js";import{faBars as N,faWindowClose as U}from"../../web_modules/@fortawesome/free-solid-svg-icons.js";export default function b(d){const{type:r}=d,{Title:i,StepDurationDays:c,WorkFlowTemplateStepItems:l,StepNumber:n}=d.stepJson||{},_=l!==void 0?l.sort((e,m)=>e.ItemOrder-m.ItemOrder):[],[S,s]=R(!1),a=I(H);function f(e){s(!0)}function u(e){s(!1)}function E(e){e.preventDefault()}function v(e){r==="inner"?a?.addStepItem(n):a?.addStep(n),s(!1)}function w(){a?.removeStep(n)}function g(e){let m=e.pageX<document.body.clientWidth-310?e.pageX+20:e.pageX-315;a?.editStep(n,{y:e.pageY-80,x:m})}return o.createElement("div",{className:`${t.StepContainer} ${r==="start"?t.StepStart:""} ${r==="end"?t.StepEnd:""}`},o.createElement("div",{className:t.StepHeader},r==="inner"&&o.createElement("div",{className:t.btnEditStep,onClick:g},o.createElement(p,{icon:N})),r==="start"?"Duration":r==="end"?"Total":o.createElement("div",{className:t.title},i),r==="inner"&&o.createElement("div",{className:t.duration},c," days"),r==="inner"&&o.createElement(p,{icon:U,className:t.btnRemoveStep,onClick:w})),o.createElement("div",{className:`${t.StepContent} ${S?t.hovered:""}`,onDragEnter:f,onDragLeave:u,onDragOver:E,onDrop:v},_.map(e=>o.createElement(P,{key:e.ItemOrder,stepItemJson:e,stepNumber:n}))))}
