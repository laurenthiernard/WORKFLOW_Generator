import t,{useState as g,useContext as N}from"../../web_modules/react.js";import U from"./StepItem.js";import k from"../WorkflowContext.js";import e from"./Step.module.css.proxy.js";import{FontAwesomeIcon as i}from"../../web_modules/@fortawesome/react-fontawesome.js";import{faBars as D,faWindowClose as I}from"../../web_modules/@fortawesome/free-solid-svg-icons.js";export default function b(l){const{type:n}=l,{Title:p,StepDurationDays:E,WorkFlowTemplateStepItems:d,StepNumber:s,IsDraft:c}=l.stepJson||{},m=d!==void 0?d.sort((a,o)=>a.ItemOrder-o.ItemOrder):[],[f,_]=g(!1),r=N(k);function S(a){_(!0)}function u(a){_(!1)}function v(a){a.preventDefault()}function R(a){n==="inner"?r?.addStepItem(s):r?.addStep(s),_(!1)}function w(){l.isLocked||r?.removeStep(s)}function P(a){let o=a.pageX<document.body.clientWidth-310?a.pageX+20:a.pageX-315;r?.editStep(s,{y:a.pageY-80,x:o})}return t.createElement("div",{className:`${e.StepContainer} ${n==="start"?e.StepStart:""} ${n==="end"?e.StepEnd:""}`},t.createElement("div",{className:e.StepHeader},c&&t.createElement("div",{className:e.labelDraft},"DRAFT"),n==="inner"&&t.createElement("div",{className:e.btnEditStep,onClick:P},t.createElement(i,{icon:D})),n==="start"?"Duration":n==="end"?"Total":t.createElement("div",{className:e.title},p),c&&t.createElement("div",{className:e.labelDraft},"DRAFT"),n==="inner"&&t.createElement("div",{className:e.duration},t.createElement("span",{className:e.durationValue},E)," day(s)"),n==="inner"&&t.createElement(i,{icon:I,className:e.btnRemoveStep,onClick:w})),t.createElement("div",{className:`${n==="end"?e.StepContentEnd:e.StepContent} ${f?e.hovered:""}`,onDragEnter:S,onDragLeave:u,onDragOver:v,onDrop:R},m.map((a,o)=>t.createElement("div",{key:a.ItemOrder,className:`${e.StepItem} ${m.length<2?e.sin:o===0?e.top:o===m.length-1?e.bot:e.mid}`},t.createElement(U,{stepItemJson:a,stepNumber:s,isLocked:l.isLocked}))),n==="start"&&r?.currentWorkflow?.WorkFlowTemplateSteps.length>0&&t.createElement("div",{className:e.startBG}),n==="end"&&r?.currentWorkflow?.WorkFlowTemplateSteps.length>0&&t.createElement("div",{className:e.endBG})))}
