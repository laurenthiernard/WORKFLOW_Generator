import o,{useState as R,useContext as k}from"../../web_modules/react.js";import I from"./StepItem.js";import P from"../WorkflowContext.js";import t from"./Step.module.css.proxy.js";import{FontAwesomeIcon as c}from"../../web_modules/@fortawesome/react-fontawesome.js";import{faBars as H,faWindowClose as N}from"../../web_modules/@fortawesome/free-solid-svg-icons.js";export default function U(r){const{type:n}=r,{Title:l,StepDurationDays:_,WorkFlowTemplateStepItems:i,StepNumber:a}=r.stepJson||{},p=i!==void 0?i.sort((e,m)=>e.ItemOrder-m.ItemOrder):[],[f,d]=R(!1),s=k(P);function S(e){d(!0)}function u(e){d(!1)}function E(e){e.preventDefault()}function v(e){n==="inner"?s?.addStepItem(a):s?.addStep(a),d(!1)}function w(){r.isLocked||s?.removeStep(a)}function g(e){let m=e.pageX<document.body.clientWidth-310?e.pageX+20:e.pageX-315;r.isLocked||s?.editStep(a,{y:e.pageY-80,x:m})}return o.createElement("div",{className:`${t.StepContainer} ${n==="start"?t.StepStart:""} ${n==="end"?t.StepEnd:""}`},o.createElement("div",{className:t.StepHeader},n==="inner"&&o.createElement("div",{className:t.btnEditStep,onClick:g},o.createElement(c,{icon:H})),n==="start"?"Duration":n==="end"?"Total":o.createElement("div",{className:t.title},l),n==="inner"&&o.createElement("div",{className:t.duration},_," days"),n==="inner"&&o.createElement(c,{icon:N,className:t.btnRemoveStep,onClick:w})),o.createElement("div",{className:`${t.StepContent} ${f?t.hovered:""}`,onDragEnter:S,onDragLeave:u,onDragOver:E,onDrop:v},p.map(e=>o.createElement(I,{key:e.ItemOrder,stepItemJson:e,stepNumber:a,isLocked:r.isLocked}))))}
