import n,{useState as P,useContext as N}from"../../web_modules/react.js";import U from"./StepItem.js";import k from"../WorkflowContext.js";import e from"./Step.module.css.proxy.js";import{FontAwesomeIcon as c}from"../../web_modules/@fortawesome/react-fontawesome.js";import{faBars as I,faWindowClose as D}from"../../web_modules/@fortawesome/free-solid-svg-icons.js";export default function b(l){const{type:r}=l,{Title:i,StepDurationDays:p,WorkFlowTemplateStepItems:_,StepNumber:s,IsDraft:E}=l.stepJson||{},m=_!==void 0?_.sort((t,o)=>t.ItemOrder-o.ItemOrder):[],[S,d]=P(!1),a=N(k);function f(t){d(!0)}function u(t){d(!1)}function v(t){t.preventDefault()}function R(t){r==="inner"?a?.addStepItem(s):a?.addStep(s),d(!1)}function w(){l.isLocked||a?.removeStep(s)}function g(t){let o=t.pageX<document.body.clientWidth-310?t.pageX+20:t.pageX-315;a?.editStep(s,{y:t.pageY-80,x:o})}return n.createElement("div",{className:`${e.StepContainer} ${r==="start"?e.StepStart:""} ${r==="end"?e.StepEnd:""}`},n.createElement("div",{className:e.StepHeader},r==="inner"&&n.createElement("div",{className:e.btnEditStep,onClick:g},n.createElement(c,{icon:I})),r==="start"?"Duration":r==="end"?"Total":n.createElement("div",{className:e.title},i),E&&n.createElement("div",{className:e.labelDraft},"DRAFT"),r==="inner"&&n.createElement("div",{className:e.duration},n.createElement("span",{className:e.durationValue},p)," day(s)"),r==="inner"&&n.createElement(c,{icon:D,className:e.btnRemoveStep,onClick:w})),n.createElement("div",{className:`${r==="end"?e.StepContentEnd:e.StepContent} ${S?e.hovered:""}`,onDragEnter:f,onDragLeave:u,onDragOver:v,onDrop:R},m.map((t,o)=>n.createElement("div",{key:t.ItemOrder,className:`${e.StepItem} ${m.length<2?e.sin:o===0?e.top:o===m.length-1?e.bot:e.mid}`},n.createElement(U,{stepItemJson:t,stepNumber:s,isLocked:l.isLocked}))),r==="start"&&a?.currentWorkflow?.WorkFlowTemplateSteps.length>0&&n.createElement("div",{className:e.startBG}),r==="end"&&a?.currentWorkflow?.WorkFlowTemplateSteps.length>0&&n.createElement("div",{className:e.endBG})))}
