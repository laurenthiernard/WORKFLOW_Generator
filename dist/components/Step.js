import o,{useState as D,useContext as I}from"../../web_modules/react.js";import P from"./StepItem.js";import k from"../WorkflowContext.js";import t from"./Step.module.css.proxy.js";import{FontAwesomeIcon as l}from"../../web_modules/@fortawesome/react-fontawesome.js";import{faBars as N,faWindowClose as U}from"../../web_modules/@fortawesome/free-solid-svg-icons.js";export default function b(n){const{type:r}=n,{Title:c,StepDurationDays:_,WorkFlowTemplateStepItems:i,StepNumber:a,IsDraft:p}=n.stepJson||{},f=i!==void 0?i.sort((e,d)=>e.ItemOrder-d.ItemOrder):[],[S,m]=D(!1),s=I(k);function E(e){m(!0)}function u(e){m(!1)}function v(e){e.preventDefault()}function R(e){r==="inner"?s?.addStepItem(a):s?.addStep(a),m(!1)}function w(){n.isLocked||s?.removeStep(a)}function g(e){let d=e.pageX<document.body.clientWidth-310?e.pageX+20:e.pageX-315;n.isLocked||s?.editStep(a,{y:e.pageY-80,x:d})}return o.createElement("div",{className:`${t.StepContainer} ${r==="start"?t.StepStart:""} ${r==="end"?t.StepEnd:""}`},o.createElement("div",{className:t.StepHeader},p&&o.createElement("div",{className:t.labelDraft},"DRAFT"),r==="inner"&&o.createElement("div",{className:t.btnEditStep,onClick:g},o.createElement(l,{icon:N})),r==="start"?"Duration":r==="end"?"Total":o.createElement("div",{className:t.title},c),r==="inner"&&o.createElement("div",{className:t.duration},_," days"),r==="inner"&&o.createElement(l,{icon:U,className:t.btnRemoveStep,onClick:w})),o.createElement("div",{className:`${t.StepContent} ${S?t.hovered:""}`,onDragEnter:E,onDragLeave:u,onDragOver:v,onDrop:R},f.map(e=>o.createElement(P,{key:e.ItemOrder,stepItemJson:e,stepNumber:a,isLocked:n.isLocked}))))}
