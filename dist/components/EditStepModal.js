import e,{useState as r,useContext as C}from"../../web_modules/react.js";import h from"../WorkflowContext.js";import t from"./EditStepModal.module.css.proxy.js";export default function D({viewportPosition:c,onUpdate:m,onClose:o,stepJson:_,stepJson:{Title:g,StepDurationDays:N,StepNumber:i,IsDraft:x}}){const u=C(h),[s,R]=r(_.Title),[d,p]=r(_.StepDurationDays),[E,f]=r(_.IsDraft),[U,P]=r({rejected:"back"});function k(){return i>=2?!u?.currentWorkflow.WorkFlowTemplateSteps[i-2].IsDraft:!1}function n(a){let l=a.target.value;switch(a.target.id){case"duration":p(Number(l));break;case"title":R(l);break;case"draft":l=a.target.checked,f(l);break;case"rules":const S=a.target.selectedIndex;P({rejected:S===0?"back":"continue"});break;default:break}}function v(a){const l={..._,Title:s,StepDurationDays:d,IsDraft:E};m(l),o()}function b(a){o()}return e.createElement(e.Fragment,null,e.createElement("div",{className:t.backdrop,onClick:b}),e.createElement("div",{className:t.EditStepModal_Container,style:{left:c.x,top:c.y}},e.createElement("div",{className:t.EditStepModal_Header},e.createElement("h1",null,"Edit Step")),e.createElement("div",{className:t.EditStepModal_Content},e.createElement("div",{className:t.EditStepModal_Content_Row},e.createElement("h3",null,"Title"),e.createElement("div",null,e.createElement("input",{type:"text",className:t.title,name:"title",id:"title",value:s,onChange:n}))),e.createElement("div",{className:t.EditStepModal_Content_Row_Inline},e.createElement("div",null,e.createElement("h3",null,"Duration"),e.createElement("div",null,e.createElement("input",{type:"number",className:t.duration,name:"duration",id:"duration",min:"1",max:"99",value:d,onChange:n}))),e.createElement("div",{className:t.draftToggle_Container},e.createElement("div",{className:t.draftToggle},e.createElement("h3",null,"Set as Draft"),e.createElement("input",{type:"checkbox",name:"draft",id:"draft",checked:E,disabled:k(),onChange:n})))),e.createElement("div",{className:t.EditStepModal_Content_Row},e.createElement("h2",null,"Step Completion Rules"),e.createElement("h3",null,"If Rejected:"),e.createElement("select",{name:"rules",id:"rules",className:t.rules,onChange:n,value:U.rejected},e.createElement("option",{value:"back"},"Back to workflow initiator"),e.createElement("option",{value:"continue"},"Continue to next step")))),e.createElement("div",{className:t.EditStepModal_Footer},e.createElement("button",{className:`btn ${t.EditStepModal_btnOK}`,onClick:v},"OK"))))}
